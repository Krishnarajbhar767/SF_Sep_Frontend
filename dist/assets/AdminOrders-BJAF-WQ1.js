import{r as m,u as E,l as f,j as e,m as u,ar as A,az as H,Y as I,aA as V,aq as B,aB as F,aC as z,aD as M,aa as q,a5 as G,af as R,an as X}from"./index-Bn0qEctH.js";const Y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},J={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},k=({status:s,type:n="delivery"})=>{const d=((t,x)=>{const o=t==null?void 0:t.toLowerCase();if(x==="payment")switch(o){case"paid":return{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",icon:"✓"};case"pending":return{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",icon:"⏳"};case"failed":return{bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:"✗"};default:return{bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200",icon:"?"}}switch(o){case"delivered":return{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",icon:"📦"};case"shipped":return{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",icon:"🚚"};case"out for delivery":return{bg:"bg-purple-50",text:"text-purple-700",border:"border-purple-200",icon:"🏃"};case"pending":return{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",icon:"⏳"};case"canceled":return{bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:"❌"};default:return{bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200",icon:"?"}}})(s,n);return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border ${d.bg} ${d.text} ${d.border}`,children:[e.jsx("span",{className:"text-xs",children:d.icon}),e.jsx("span",{className:"capitalize",children:s})]})},K=({totalOrders:s,filteredCount:n})=>e.jsx(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center gap-3 text-2xl sm:text-3xl font-bold text-gray-800",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(A,{size:24,className:"text-blue-600"})}),"Orders Management"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Manage and track all customer orders from one place"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n}),e.jsx("div",{className:"text-sm text-gray-600",children:n===s?"Total Orders":`of ${s} orders`})]})]})}),Q=({searchTerm:s,setSearchTerm:n,sortField:i,sortOrder:d,toggleSort:t,deliveryFilter:x,setDeliveryFilter:o,paymentFilter:y,setPaymentFilter:p,hasActiveFilters:j,clearFilters:b})=>e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(H,{size:18,className:"text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filters & Search"}),j&&e.jsxs(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:b,className:"ml-auto flex items-center gap-1 px-3 py-1 bg-red-50 text-red-700 rounded-lg text-sm font-medium hover:bg-red-100 transition-colors",children:[e.jsx(I,{size:14}),"Clear All"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4",children:[e.jsxs("div",{className:"lg:col-span-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Search Orders"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Name, email, order ID...",value:s,onChange:g=>n(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Sort By"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t("totalAmount"),className:`flex items-center gap-1 px-3 py-2 text-sm rounded-lg font-medium transition-colors ${i==="totalAmount"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(B,{size:14}),"Amount",i==="totalAmount"&&(d==="asc"?e.jsx(F,{size:12}):e.jsx(z,{size:12}))]}),e.jsxs(u.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t("createdAt"),className:`flex items-center gap-1 px-3 py-2 text-sm rounded-lg font-medium transition-colors ${i==="createdAt"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(M,{size:14}),"Date",i==="createdAt"&&(d==="asc"?e.jsx(F,{size:12}):e.jsx(z,{size:12}))]})]})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Delivery Status"}),e.jsxs("select",{value:x,onChange:g=>o(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"out for delivery",children:"Out for Delivery"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"canceled",children:"Canceled"})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Payment Status"}),e.jsxs("select",{value:y,onChange:g=>p(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[e.jsx("option",{value:"all",children:"All Payments"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"failed",children:"Failed"})]})]})]})]}),W=({order:s,onDeliveryUpdate:n,onPaymentUpdate:i,onNavigate:d})=>{var t,x;return e.jsxs(u.div,{variants:J,whileHover:{scale:1.02,y:-5},transition:{duration:.2},className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>d(`/admin/orders/order/${s._id}`),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(q,{size:18,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-800 text-sm",children:["#",s.razorpay_order_id.slice(5,10),"..."]}),e.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["ID: ",s._id.slice(-8)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-800",children:["₹",s.totalAmount]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(G,{size:14,className:"text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-700 capitalize",children:[(t=s.user)==null?void 0:t.firstName," ",(x=s.user)==null?void 0:x.lastName]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{status:s.deliveryStatus,type:"delivery"}),e.jsx(k,{status:s.paymentStatus,type:"payment"})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:[e.jsx(R,{size:12,className:"inline mr-1"}),"Update Delivery"]}),e.jsxs("select",{value:s.deliveryStatus,onChange:o=>n(s._id,o.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Shipped",children:"Shipped"}),e.jsx("option",{value:"Out for Delivery",children:"Out for Delivery"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Canceled",children:"Canceled"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:[e.jsx(X,{size:12,className:"inline mr-1"}),"Update Payment"]}),e.jsxs("select",{value:s.paymentStatus,onChange:o=>i(s._id,o.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Failed",children:"Failed"})]})]})]})})]})},Z=({orders:s,onDeliveryUpdate:n,onPaymentUpdate:i,navigate:d})=>s.length===0?e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Orders Found"}),e.jsx("p",{className:"text-gray-600",children:"No orders match your current filters. Try adjusting your search criteria."})]})}):e.jsx(u.div,{variants:Y,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:s.map(t=>e.jsx(W,{order:t,onDeliveryUpdate:n,onPaymentUpdate:i,onNavigate:d},t._id))});function se(){const[s,n]=m.useState([]),[i,d]=m.useState(""),[t,x]=m.useState(null),[o,y]=m.useState("asc"),[p,j]=m.useState("all"),[b,g]=m.useState("all"),[D,v]=m.useState(!0),P=E();m.useEffect(()=>{v(!0),f.get("/admin/orders/all-orders").then(a=>{n(a.data.data||[]),v(!1)}).catch(a=>{console.error("Error fetching orders:",a),v(!1)})},[]);const N=m.useMemo(()=>{let a=[...s];if(i.trim()){const l=i.trim().toLowerCase();a=a.filter(r=>{var w,S,C;const c=`${((w=r.user)==null?void 0:w.firstName)||""} ${((S=r.user)==null?void 0:S.lastName)||""}`.toLowerCase(),h=(((C=r.user)==null?void 0:C.email)||"").toLowerCase(),U=(r.razorpay_order_id||"").toLowerCase();return c.includes(l)||h.includes(l)||U.includes(l)})}return p!=="all"&&(a=a.filter(l=>{var r;return((r=l.deliveryStatus)==null?void 0:r.toLowerCase())===p})),b!=="all"&&(a=a.filter(l=>{var r;return((r=l.paymentStatus)==null?void 0:r.toLowerCase())===b})),t&&a.sort((l,r)=>{const c=l[t],h=r[t];return c==null||h==null?0:o==="asc"?c>h?1:-1:c<h?1:-1}),a},[s,i,p,b,t,o]),O=a=>{t===a?y(l=>l==="asc"?"desc":"asc"):(x(a),y("asc"))},_=async(a,l)=>{try{await f.put(`/admin/orders/order/${a}/status`,{status:l}),n(r=>r.map(c=>c._id===a?{...c,deliveryStatus:l}:c))}catch(r){console.error("Error updating delivery status:",r)}},$=async(a,l)=>{try{await f.put(`/payment/${a}/payment-status`,{paymentStatus:l}),n(r=>r.map(c=>c._id===a?{...c,paymentStatus:l}:c))}catch(r){console.error("Error updating payment status:",r)}},L=p!=="all"||b!=="all"||i.trim(),T=()=>{j("all"),g("all"),d(""),x(null)};return D?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse space-y-8",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[...Array(6)].map((a,l)=>e.jsx("div",{className:"h-80 bg-gray-200 rounded-xl"},l))})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs(u.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"space-y-8",children:[e.jsx(K,{totalOrders:s.length,filteredCount:N.length}),e.jsx(Q,{searchTerm:i,setSearchTerm:d,sortField:t,sortOrder:o,toggleSort:O,deliveryFilter:p,setDeliveryFilter:j,paymentFilter:b,setPaymentFilter:g,hasActiveFilters:L,clearFilters:T}),e.jsx(Z,{orders:N,onDeliveryUpdate:_,onPaymentUpdate:$,navigate:P})]})})})}export{se as default};
