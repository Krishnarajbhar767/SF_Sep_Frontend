import{g as S,d as D,j as e,m as d,b as j,al as P,a9 as O,ae as L,am as F}from"./index-B8gvfyd-.js";import{F as I,T as C}from"./Constant-B8kb6R2V.js";import{R as k}from"./ReceiptPreview-B8-zU8jb.js";const h={hidden:{opacity:0,y:20},visible:s=>({opacity:1,y:0,transition:{delay:s*.2,duration:.4}})},u=({status:s,type:t="default"})=>{const i=(s||"").toLowerCase();let a="bg-gray-50 text-gray-700 border-gray-200";return t==="payment"?a=i==="paid"?"bg-emerald-50 text-emerald-700 border-emerald-200":["failed","pending"].includes(i)?"bg-red-50 text-red-700 border-red-200":a:a=i==="delivered"?"bg-emerald-50 text-emerald-700 border-emerald-200":["shipped","out for delivery"].includes(i)?"bg-blue-50 text-blue-700 border-blue-200":i==="pending"?"bg-amber-50 text-amber-700 border-amber-200":i==="canceled"?"bg-red-50 text-red-700 border-red-200":a,e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${a}`,children:s||"N/A"})},_=({order:s})=>e.jsxs(d.div,{custom:0,initial:"hidden",animate:"visible",variants:h,className:"flex flex-col sm:flex-row justify-between items-center gap-4 px-4",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-1",children:"Order Details"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID:"," ",e.jsx("span",{className:"font-mono",children:(s==null?void 0:s.razorpay_order_id)||"N/A"})]})]}),e.jsxs(j,{to:"/account/orders",className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 hover:underline",children:[e.jsx(P,{size:16})," Back to Orders"]})]}),z=({order:s,formatINR:t})=>e.jsx(d.div,{custom:1,initial:"hidden",animate:"visible",variants:h,className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 mx-4",children:e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Order Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Total Amount"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["₹",t(s.totalAmount)]}),s.discount>0&&e.jsxs("p",{className:"text-sm font-semibold text-red-600",children:["Coupon Discount: - ₹",t(s.discount)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Payment Status"}),e.jsx(u,{status:s.paymentStatus,type:"payment"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Delivery Status"}),e.jsx(u,{status:s.deliveryStatus})]})]})}),T=({item:s,formatINR:t})=>{var p,m,y,b,f,v,N,A,w;const i=((p=s.product)==null?void 0:p.price)||0,a=(m=s.product)==null?void 0:m.isOfferAplied,n=a&&((y=s.product)==null?void 0:y.offerDiscount)||0,r=a?i*n/100:0,l=i-r,c=(s.withFallPico?I:0)+(s.withTassels?C:0),x=l+c,o=s.quantity||0,g=x*o;return e.jsx(d.div,{whileHover:{scale:1.01},transition:{duration:.2},className:"bg-white border border-gray-200 rounded-xl p-2 sm:p-6 mx-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(j,{to:`/product/${(b=s.product)==null?void 0:b._id}`,className:"shrink-0",children:e.jsx("img",{src:((v=(f=s.product)==null?void 0:f.images)==null?void 0:v[0])||"/Product_Placeholder.webp",alt:((N=s.product)==null?void 0:N.name)||"Product image",className:"w-full h-36 sm:w-28 sm:h-28 object-cover rounded-md"})}),e.jsxs("div",{className:"flex-1 space-y-2 text-sm text-gray-700",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 capitalize",children:((A=s.product)==null?void 0:A.name)||"Unnamed Product"}),e.jsxs("div",{className:"flex gap-4 mt-1 text-xs text-gray-500 flex-wrap",children:[e.jsxs("span",{children:["Qty: ",e.jsx("strong",{children:o})]}),e.jsxs("span",{children:["ID: ",e.jsx("code",{children:((w=s.product)==null?void 0:w._id)||"N/A"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsxs("p",{className:"font-semibold",children:["Base Price: ₹",t(i)]}),a&&n>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-green-600",children:["Offer ",n,"% → -₹",t(r)]}),e.jsxs("p",{children:["After Offer: ₹",t(l)]})]}):e.jsxs("p",{className:"text-gray-600",children:["No Offer → ₹",t(l)]}),c>0&&e.jsxs("p",{children:["Add‑ons: +₹",t(c)]}),e.jsxs("p",{className:"font-bold",children:["Unit Price: ₹",t(x)]}),e.jsxs("p",{children:["Total: ",o," × ₹",t(x)," = ₹",t(g)]})]})]})]})})},B=({order:s})=>{var t,i,a,n,r,l,c,x,o,g,p,m;return e.jsxs(d.div,{custom:3,initial:"hidden",animate:"visible",variants:h,className:"space-y-4 px-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(L,{size:20})," Shipping Information"]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 shadow-sm space-y-2",children:[e.jsx("p",{children:((t=s.shippingAddress)==null?void 0:t.street)||((i=s.shippingAddressSnapshot)==null?void 0:i.street)}),e.jsxs("p",{children:[((a=s.shippingAddress)==null?void 0:a.city)||((n=s.shippingAddressSnapshot)==null?void 0:n.city),","," ",((r=s.shippingAddress)==null?void 0:r.state)||((l=s.shippingAddressSnapshot)==null?void 0:l.state)]}),e.jsxs("p",{children:[((c=s.shippingAddress)==null?void 0:c.postalCode)||((x=s.shippingAddressSnapshot)==null?void 0:x.postalCode),","," ",((o=s.shippingAddress)==null?void 0:o.country)||((g=s.shippingAddressSnapshot)==null?void 0:g.country)]}),e.jsxs("p",{children:["Phone:"," ",((p=s.shippingAddress)==null?void 0:p.phone)||((m=s.shippingAddressSnapshot)==null?void 0:m.phone)]}),s.deliveredAt&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Delivered At:"," ",new Date(s.deliveredAt).toLocaleString("en-IN")]})]})]})},E=({order:s})=>e.jsxs(d.div,{custom:4,initial:"hidden",animate:"visible",variants:h,className:"space-y-4 px-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(F,{size:20})," Payment Information"]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 shadow-sm space-y-2",children:[e.jsxs("p",{children:["Method: ",s.paymentMethod||"N/A"]}),e.jsxs("p",{children:["Status:"," ",e.jsx(u,{status:s.paymentStatus,type:"payment"})]}),s.paidAt&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Paid At: ",new Date(s.paidAt).toLocaleString("en-IN")]})]})]});function M(){var a;const{orderId:s}=S(),t=D(n=>n.order.orders||[]).find(n=>n._id===s),i=n=>(n||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2});return t?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsx(_,{order:t}),e.jsx(z,{order:t,formatINR:i}),e.jsxs(d.div,{custom:2,initial:"hidden",animate:"visible",variants:h,className:"space-y-4 px-0",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(O,{size:20})," Products (",((a=t.items)==null?void 0:a.length)||0,")"]}),e.jsx("div",{className:"space-y-4",children:t.items.map((n,r)=>e.jsx(T,{item:n,formatINR:i},r))})]}),e.jsx(B,{order:t}),e.jsx(E,{order:t}),e.jsx("div",{className:"px-4",children:e.jsx(k,{imageUrl:t.delhiveryReceipt,trackingId:t==null?void 0:t.trackingId,parcelWeight:t==null?void 0:t.parcelWeight,deliveryPartner:t==null?void 0:t.deliveryPartner})})]})}):e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center py-16",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Order Not Found"}),e.jsxs(j,{to:"/account/orders",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(P,{size:16})," Back to Orders"]})]})}export{M as default};
