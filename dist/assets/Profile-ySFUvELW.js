import{d as A,e as U,r as c,a as y,j as e,m as p,a5 as N,a6 as P,a7 as D,I as i,B as V,a8 as v,A as B,V as r,l as M,s as Y,h,c as S}from"./index-Bn0qEctH.js";function G(){const s=A(a=>{var t;return(t=a==null?void 0:a.user)==null?void 0:t.user}),C=U(),[o,f]=c.useState(!1),[m,w]=c.useState(!1),[q,u]=c.useState(!1),[O,b]=c.useState(!1),{register:l,handleSubmit:F,formState:{errors:d},reset:$}=y({defaultValues:{firstName:s==null?void 0:s.firstName,lastName:s==null?void 0:s.lastName,email:s==null?void 0:s.email,phone:s==null?void 0:s.phone,gender:s==null?void 0:s.gender,dob:s==null?void 0:s.dob}}),{register:x,handleSubmit:I,formState:{errors:g},watch:j,reset:L}=y({defaultValues:{password:"",confirmPassword:"",oldPassword:""}});async function E(){const a=r.loading("Please wait...");try{await S.logOut()&&(r.success("Logged out successfully"),r.dismiss(a))}catch(t){h(t),r.dismiss(a)}}const k=async a=>{const t=r.loading("Updating profile...");b(!0);try{const n=await M.put("/user/update-profile",a);n.data.success&&(C(Y(n.data.user)),r.success("Profile updated successfully!"),f(!1))}catch(n){h(n)}finally{r.dismiss(t),b(!1)}},z=async a=>{const t=r.loading("Please wait...");try{const n=await S.changePassword(a);r.success("Password changed successfully"),console.log("Response Of Password Change",n)}catch(n){h(n)}finally{r.dismiss(t)}w(!1),L()};return e.jsxs(e.Fragment,{children:[e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"space-y-6 sm:space-y-8",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h2",{className:"flex items-center gap-2 text-lg sm:text-xl md:text-2xl font-semibold uppercase text-foreground tracking-wide",children:[e.jsx(N,{size:20})," Profile Overview"]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:`https://ui-avatars.com/api/?name=${s==null?void 0:s.firstName}+${s==null?void 0:s.lastName}`,alt:"Profile",className:"w-24 h-24 object-cover border-2 border-foreground/40"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg sm:text-xl font-medium text-foreground capitalize",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),e.jsxs("p",{className:"text-sm sm:text-base text-foreground",children:["Member since"," ",new Date(s==null?void 0:s.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-base sm:text-lg font-semibold uppercase text-foreground tracking-wide",children:[e.jsx(N,{size:20})," Update Profile"]}),e.jsx("button",{onClick:()=>f(!o),className:"flex items-center gap-2 bg-foreground text-white px-4 py-2 text-sm uppercase hover:bg-foreground/90 transition-colors duration-200 shadow-md",children:o?e.jsxs(e.Fragment,{children:[e.jsx(P,{size:16})," Save"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:16})," Edit Profile"]})})]}),e.jsxs("form",{onSubmit:F(k),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 capitalize",children:[e.jsx(i,{label:"First Name",name:"firstName",register:l,errors:d,rules:{required:"First name is required"},readOnly:!o}),e.jsx(i,{label:"Last Name",name:"lastName",register:l,errors:d,rules:{required:"Last name is required"},readOnly:!o}),e.jsx(i,{label:"Email",name:"email",type:"email",register:l,errors:d,rules:{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}},readOnly:!0}),e.jsx(i,{label:"Phone",name:"phone",type:"tel",register:l,errors:d,rules:{required:"Phone number is required"},readOnly:!o}),e.jsx(i,{label:"Gender",name:"gender",register:l,errors:d,readOnly:!o}),e.jsx(i,{label:"Date of Birth",name:"dob",type:"date",register:l,errors:d,rules:{required:"Date of birth is required"},readOnly:!o})]}),o&&e.jsx(V,{type:"submit",className:"bg-foreground text-white px-6 py-2 text-sm uppercase hover:bg-foreground/90 transition-colors duration-200 shadow-md",loading:O,children:"Update Profile"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-base sm:text-lg font-semibold uppercase text-foreground tracking-wide",children:[e.jsx(v,{size:20})," Change Password"]}),e.jsx("button",{onClick:()=>w(!m),className:"flex items-center gap-2 bg-foreground text-white px-4 py-2 text-sm uppercase hover:bg-foreground/90 transition-colors duration-200 shadow-md",children:m?e.jsxs(e.Fragment,{children:[e.jsx(P,{size:16})," Save"]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{size:16})," Change Password"]})})]}),m&&e.jsxs("form",{onSubmit:I(z),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx(i,{label:"Your Current Password",name:"oldPassword",type:"password",register:x,errors:g,rules:{required:"Current password is required",minLength:{value:6,message:"Old Password must be at least 6 characters"}}}),e.jsx(i,{label:"New Password",name:"password",type:"password",register:x,errors:g,rules:{required:"New password is required",minLength:{value:6,message:"Password must be at least 6 characters"},validate:a=>a!==j("oldPassword")||"New password cannot be the same as the old password"}}),e.jsx(i,{label:"Confirm Password",name:"confirmPassword",type:"password",register:x,errors:g,rules:{required:"Confirm password is required",validate:a=>a===j("password")||"Passwords do not match"}})]}),e.jsx("button",{type:"submit",className:"bg-foreground text-white px-6 py-2 text-sm uppercase hover:bg-foreground/90 transition-colors duration-200 shadow-md",children:"Update Password"})]})]}),e.jsx("div",{className:"w-fit mx-auto",children:e.jsx("button",{onClick:()=>u(!0),className:"bg-red-600 text-white px-6 py-2 text-sm uppercase hover:bg-red-700 transition-colors duration-200 shadow-md",children:"Log Out"})})]}),e.jsx(B,{children:q&&e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs(p.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},transition:{duration:.2},className:"bg-white  rounded w-11/12 max-w-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"Confirm Logout"}),e.jsx("p",{className:"text-sm text-foreground/80 mb-6",children:"Are you sure you want to log out? You will need to sign in again to access your account."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-sm bg-gray-200 text-gray-700  hover:bg-gray-300 transition-colors duration-150",children:"Cancel"}),e.jsx("button",{onClick:()=>{u(!1),E()},className:"px-4 py-2 text-sm bg-red-600 text-white hover:bg-red-700 transition-colors duration-150",children:"Yes, Log Out"})]})]})},"logout-modal")})]})}export{G as default};
