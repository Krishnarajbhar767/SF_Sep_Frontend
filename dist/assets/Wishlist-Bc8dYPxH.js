import{d as c,e as v,u as y,r as w,j as e,m as a,i as h,t as b,v as j,V as C,N as _}from"./index-DRzNUvPi.js";function k({item:s,idx:d}){const t=Array.isArray(s.images)?s.images[0]:s.image,o=c(r=>{var n;return(n=r==null?void 0:r.user)==null?void 0:n.user}),i=c(r=>{var n;return((n=r==null?void 0:r.cart)==null?void 0:n.cartItems)||[]}),x=v(),p=y(),u=async r=>{if(!(i==null?void 0:i.some(l=>(l==null?void 0:l._id)===(r==null?void 0:r._id)))&&o)try{const l={product:r._id,quantity:r.quantity||1,finalPrice:r.price,withCustomization:!1,totalPrice:r.price,userId:o._id},g=await h.post("/user/cart/add",l);if(!g)return;x(b(g.data));const E=await h.post("/user/wishlist/remove",{userId:o==null?void 0:o._id,productId:s==null?void 0:s._id});x(j(s==null?void 0:s._id))}catch(l){C.error("Something went wrong"),console.error(l)}else p("/cart")},[m,N]=w.useState(!1),f=async r=>{try{const n=await h.post("/user/wishlist/remove",{productId:r,userId:o==null?void 0:o._id});x(j(r))}catch(n){console.log(n,"Failed to remove from wishlist")}};return w.useEffect(()=>{const r=i==null?void 0:i.some(n=>(n==null?void 0:n._id)===(s==null?void 0:s._id));N(r)},[i,s]),e.jsxs(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:d*.1},whileHover:{scale:1.01},className:"grid grid-cols-1 sm:grid-cols-5 gap-4 items-center border-b border-foreground/40 py-4 ",children:[e.jsxs("div",{className:"flex items-start gap-4 col-span-1 sm:col-span-2 cursor-pointer",onClick:()=>{p(`/product/${s==null?void 0:s._id}`)},children:[e.jsx(a.div,{className:"w-[100px] sm:w-[120px] md:w-[140px] aspect-square  overflow-hidden  flex-shrink-0",whileHover:{scale:1.03},transition:{duration:.2},children:e.jsx("img",{src:t,alt:s.name,className:"w-full h-full object-cover object-top"})}),e.jsxs("div",{className:"flex flex-col justify-between space-y-1",children:[e.jsx("h2",{className:"text-base font-semibold text-foreground leading-snug line-clamp-2",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-foreground/70 line-clamp-2",children:s.description.length>80?s.description.slice(0,80)+"...":s.description}),e.jsxs("span",{className:"text-xs text-foreground/50 mt-1",children:["ID: ",s._id.slice(-6)]})]})]}),e.jsxs("div",{className:"hidden sm:flex flex-col items-center justify-center col-span-1",children:[e.jsx("span",{className:"text-xs text-foreground/60",children:"Price"}),e.jsxs("span",{className:"text-sm font-semibold text-foreground",children:["₹",s.price.toFixed(2)]})]}),e.jsxs("div",{className:"hidden sm:flex flex-col gap-2 items-center justify-center col-span-2",children:[e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(s),className:"w-full max-w-[140px] px-4 py-2 bg-foreground text-white text-sm rounded hover:bg-foreground/90 transition-all",children:m?"Go to Cart":"Move to Cart"}),e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-sm text-red-500 hover:underline",onClick:()=>f(s._id),children:"Remove"})]}),e.jsxs("div",{className:"sm:hidden mt-2 col-span-1 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between text-sm text-foreground",children:[e.jsx("span",{className:"text-foreground/60",children:"Price"}),e.jsxs("span",{className:"font-medium",children:["₹",s.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(s),className:"w-full px-3 py-2 bg-foreground text-white text-sm rounded hover:bg-foreground/90 transition-all",children:m?"Go to Cart":"Move to Cart"}),e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-sm text-red-500 hover:underline",onClick:()=>f(s._id),children:"Remove"})]})]})]})}function H(){const s=y();return e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 flex items-center justify-center bg-gray-100",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 sm:w-10 sm:h-10 text-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"text-foreground text-sm sm:text-base mb-2",children:"Your wishlist is empty."}),e.jsx("p",{className:"text-foreground text-xs sm:text-sm mb-6",children:"Browse products and tap the heart icon to add them."}),e.jsx("button",{onClick:()=>s("/"),className:"bg-foreground text-white px-4 py-2 text-xs sm:text-sm uppercase rounded hover:bg-foreground/90",children:"Continue Shopping"})]})}function A(){const s=c(t=>(t==null?void 0:t.wishlist)||[]),d=c(t=>{var o;return(o=t==null?void 0:t.user)==null?void 0:o.user});return v(),d?e.jsxs("div",{className:"boxedContainer h-auto w-full py-4 sm:py-6 md:py-8 px-3 sm:px-6 md:px-8 max-w-7xl mx-auto ",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-[35px] font-bold uppercase mb-4 sm:mb-6",children:"Wishlist"}),s.length===0?e.jsx(H,{}):e.jsx("div",{className:"space-y-4  md:w-[80%] mx-auto",children:s.map((t,o)=>e.jsx(k,{item:t,idx:o},t._id))})]}):e.jsx(_,{to:"/login",replace:!0})}export{A as default};
