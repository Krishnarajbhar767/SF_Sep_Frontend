import{r as h,l as i}from"./index-B8gvfyd-.js";let n=null,c=null;const a=new Map,f=new Map,m=e=>{const s=new Date(e.createdAt).getTime()+e.maxAge*60*60*1e3;return e.status&&Date.now()<s};function A(e=null){const[o,s]=h.useState(e?null:n??[]);return h.useEffect(()=>{if(e){if(a.has(e)){s(a.get(e));return}if(!f.has(e)){const r=i.get(`/offer/${e}`).then(u=>{const t=u.data,l=t&&m(t)?t.discount:!1;return a.set(e,l),l}).catch(()=>(a.set(e,!1),!1));f.set(e,r)}f.get(e).then(s)}else{if(n!==null)return;c||(c=i.get("/offer/").then(r=>{const t=(Array.isArray(r.data)?r.data:[]).filter(m);return n=t,t}).catch(()=>(n=[],[]))),c.then(s)}},[e]),o}export{A as u};
