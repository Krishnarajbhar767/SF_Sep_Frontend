import{d as x,a as L,e as N,r as k,u as S,j as e,m as t,H as A,I as h,b as y,B as P,c as E,s as I,f as V,V as q,h as z}from"./index-Bn0qEctH.js";function Z(){const v=x(i=>{var s;return(s=i==null?void 0:i.user)==null?void 0:s.token})||localStorage.getItem("token"),o=x(i=>{var s,n;return(n=(s=i==null?void 0:i.user)==null?void 0:s.user)==null?void 0:n.role}),{register:l,watch:d,handleSubmit:g,formState:{errors:c}}=L(),u=N(),f=d("email"),j=d("password"),[w,m]=k.useState(!1),r=S(),p={hidden:{opacity:0,y:10},visible:i=>({opacity:1,y:0,transition:{duration:.3,delay:i*.1}})};async function b(i){var s,n;m(!0);try{console.log("Login loginCredentials",i);const a=await E.login(i);return u(I(a==null?void 0:a.user)),localStorage.setItem("token",a.token),u(V(a==null?void 0:a.token)),q.success(`Welcome ${(s=a==null?void 0:a.user)==null?void 0:s.firstName}`),((n=a==null?void 0:a.user)==null?void 0:n.role)==="admin"?r("/admin/overview"):r("/account/dashboard")}catch(a){z(a)}finally{m(!1)}}return v&&o?r(o==="admin"?"/admin/overview":"/account/dashboard"):e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"boxedContainer md:w-[40%] py-8 h-auto px-8",children:[e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:e.jsx(A,{text:"Login"})}),e.jsxs("form",{className:"flex flex-col gap-3 mt-6",onSubmit:g(b),children:[e.jsx(t.div,{custom:0,initial:"hidden",animate:"visible",variants:p,children:e.jsx(h,{register:l,name:"email",type:"email",label:"Email Or Username*",errors:c,value:f,rules:{required:"Email is required.",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Please enter a valid email address"}}})}),e.jsx(t.div,{custom:1,initial:"hidden",animate:"visible",variants:p,children:e.jsx(h,{register:l,name:"password",type:"password",label:"Password*",errors:c,value:j,rules:{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"},maxLength:{value:20,message:"Password must not exceed 20 characters"}}})}),e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"items-center flex justify-between text-foreground",children:e.jsx("div",{children:e.jsx(y,{to:"/reset-password",className:"text-sm underline cursor-pointer",children:"Lost Password ?"})})}),e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},children:e.jsx(P,{text:"Login",type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:w})}),e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},children:e.jsxs("h1",{className:"mx-auto text-center text-foreground text-[16px]",children:["No account yet?.."," ",e.jsx(y,{to:"/sign-up",className:"text-sm capitalize underline cursor-pointer",children:"Create Account"})]})})]})]})}export{Z as default};
