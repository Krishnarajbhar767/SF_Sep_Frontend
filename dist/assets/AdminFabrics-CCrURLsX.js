import{a as f,j as e,d as j,e as N,r as o,m as u,aw as w,a5 as v,ai as F,W as S,i as d,h as p,aM as C}from"./index-DRzNUvPi.js";function E({fabric:a,onClose:x,onSave:m}){const{register:r,handleSubmit:i,formState:{errors:l}}=f({defaultValues:{title:(a==null?void 0:a.title)||""}}),n=c=>{m(c)};return e.jsxs("form",{onSubmit:i(n),className:"space-y-4 ",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Fabric Title"}),e.jsx("input",{...r("title",{required:"Title is required"}),className:"w-full border px-3 py-2 rounded text-gray-800",placeholder:"Enter fabric title"}),l.title&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.title.message})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:x,className:"bg-gray-300 px-4 py-2 rounded text-sm hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-gray-800 text-white px-4 py-2 rounded text-sm hover:bg-gray-700",children:a?"Update":"Add"})]})]})}const k=()=>{const a=j(t=>t.fabrics||[]),x=N(),[m,r]=o.useState(!1),[i,l]=o.useState(null),[n,c]=o.useState(null),h=async()=>{try{const t=await d.get("/admin/fabrics/");x(C(t.data))}catch(t){console.error("Error fetching fabrics",t),p(t)}};o.useEffect(()=>{h()},[]);const b=async t=>{try{await d.delete(`/admin/fabrics/${t}`),console.log("Deleted fabric ID:",t),h()}catch(s){console.error("Delete failed",s),p(s)}finally{c(null)}},y=t=>{l(t),r(!0)},g=()=>{l(null),r(!0)};return e.jsxs(u.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:"Fabrics"}),e.jsxs("button",{onClick:g,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 text-sm uppercase hover:bg-gray-700 transition",children:[e.jsx(w,{})," Add Fabric"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 text-sm uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border",children:"Title"}),e.jsx("th",{className:"px-4 py-2 border",children:"Actions"})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"text-center text-gray-600 py-6",children:"No fabrics found."})}):a.map(t=>e.jsxs("tr",{className:"text-gray-800",children:[e.jsx("td",{className:"px-4 py-2 border capitalize",children:t.title}),e.jsxs("td",{className:"px-4 py-2 border flex gap-3",children:[e.jsxs("button",{onClick:()=>y(t),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(v,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>c(t._id),className:"text-red-600 hover:text-red-800 flex items-center gap-1",children:[e.jsx(F,{size:14})," Delete"]})]})]},t._id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 glass bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs(u.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"bg-white p-6 w-full max-w-md rounded shadow-md relative",children:[e.jsx("button",{className:"absolute top-3 right-3 text-gray-600 hover:text-gray-800",onClick:()=>r(!1),children:e.jsx(S,{})}),e.jsx(E,{fabric:i,onClose:()=>r(!1),onSave:async t=>{try{if(i){const s=await d.put(`/admin/fabrics/${i._id}`,t);console.log("Updated fabric:",s.data)}else{const s=await d.post("/admin/fabrics",t);console.log("Added fabric:",s.data)}h()}catch(s){console.error("Save failed",s),p(s)}finally{r(!1)}}})]})}),n&&e.jsx("div",{className:"fixed inset-0 glass flex items-center justify-center z-50 p-4",children:e.jsxs(u.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"bg-white p-6 w-full max-w-sm rounded shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirm Delete"}),e.jsx("p",{className:"text-sm text-gray-600 mb-5",children:"Are you sure you want to delete this fabric?"}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded text-sm hover:bg-gray-400",onClick:()=>c(null),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700",onClick:()=>b(n),children:"Delete"})]})]})})]})};export{k as default};
