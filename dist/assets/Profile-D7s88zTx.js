import{d as k,r as u,a as b,j as e,m as p,a4 as j,a5 as y,a6 as z,I as t,a7 as N,A as I,V as o,c as P,h as v}from"./index-B8gvfyd-.js";function D(){const s=k(r=>{var i;return(i=r==null?void 0:r.user)==null?void 0:i.user}),[a,h]=u.useState(!1),[d,f]=u.useState(!1),[S,c]=u.useState(!1),{register:n,handleSubmit:C,formState:{errors:l}}=b({defaultValues:{firstName:s==null?void 0:s.firstName,lastName:s==null?void 0:s.lastName,email:s==null?void 0:s.email,phone:s==null?void 0:s.phone,gender:s==null?void 0:s.gender,dob:s==null?void 0:s.dob}}),{register:m,handleSubmit:q,formState:{errors:x},watch:w,reset:O}=b({defaultValues:{password:"",confirmPassword:"",oldPassword:""}});async function F(){const r=o.loading("Please wait...");try{await P.logOut()&&(o.success("Logged out successfully"),o.dismiss(r))}catch(i){v(i),o.dismiss(r)}}const L=r=>{console.log("Profile updated:",r),h(!1)},E=async r=>{const i=o.loading("Please wait...");try{const g=await P.changePassword(r);o.success("Password changed successfully"),console.log("Response Of Password Change",g)}catch(g){v(g)}finally{o.dismiss(i)}f(!1),O()};return e.jsxs(e.Fragment,{children:[e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"space-y-6 sm:space-y-8",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h2",{className:"flex items-center gap-2 text-lg sm:text-xl md:text-2xl font-semibold uppercase text-foreground tracking-wide",children:[e.jsx(j,{size:20})," Profile Overview"]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:`https://ui-avatars.com/api/?name=${s==null?void 0:s.firstName}+${s==null?void 0:s.lastName}`,alt:"Profile",className:"w-24 h-24 object-cover border-2 border-foreground/40"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg sm:text-xl font-medium text-foreground capitalize",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),e.jsxs("p",{className:"text-sm sm:text-base text-foreground",children:["Member since"," ",new Date(s==null?void 0:s.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-base sm:text-lg font-semibold uppercase text-foreground tracking-wide",children:[e.jsx(j,{size:20})," Update Profile"]}),e.jsx("button",{onClick:()=>h(!a),className:"flex items-center gap-2 bg-foreground text-white px-4 py-2 text-sm uppercase hover:bg-foreground/90 transition-colors duration-200 shadow-md",children:a?e.jsxs(e.Fragment,{children:[e.jsx(y,{size:16})," Save"]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{size:16})," Edit Profile"]})})]}),e.jsxs("form",{onSubmit:C(L),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 capitalize",children:[e.jsx(t,{label:"First Name",name:"firstName",register:n,errors:l,rules:{required:"First name is required"},readOnly:!a}),e.jsx(t,{label:"Last Name",name:"lastName...",register:n,errors:l,rules:{required:"Last name is required"},readOnly:!a}),e.jsx(t,{label:"Email",name:"email",type:"email",register:n,errors:l,rules:{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}},readOnly:!a}),e.jsx(t,{label:"Phone",name:"phone",type:"tel",register:n,errors:l,rules:{required:"Phone number is required"},readOnly:!a}),e.jsx(t,{label:"Gender",name:"gender",register:n,errors:l,readOnly:!a}),e.jsx(t,{label:"Date of Birth",name:"dob",type:"date",register:n,errors:l,rules:{required:"Date of birth is required"},readOnly:!a})]}),a&&e.jsx("button",{type:"submit",className:"bg-foreground text-white px-6 py-2 text-sm uppercase hover:bg-foreground/90 transition-colors duration-200 shadow-md",children:"Update Profile"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-base sm:text-lg font-semibold uppercase text-foreground tracking-wide",children:[e.jsx(N,{size:20})," Change Password"]}),e.jsx("button",{onClick:()=>f(!d),className:"flex items-center gap-2 bg-foreground text-white px-4 py-2 text-sm uppercase hover:bg-foreground/90 transition-colors duration-200 shadow-md",children:d?e.jsxs(e.Fragment,{children:[e.jsx(y,{size:16})," Save"]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{size:16})," Change Password"]})})]}),d&&e.jsxs("form",{onSubmit:q(E),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx(t,{label:"Your Current Password",name:"oldPassword",type:"password",register:m,errors:x,rules:{required:"Current password is required",minLength:{value:6,message:"Old Password must be at least 6 characters"}}}),e.jsx(t,{label:"New Password",name:"password",type:"password",register:m,errors:x,rules:{required:"New password is required",minLength:{value:6,message:"Password must be at least 6 characters"},validate:r=>r!==w("oldPassword")||"New password cannot be the same as the old password"}}),e.jsx(t,{label:"Confirm Password",name:"confirmPassword",type:"password",register:m,errors:x,rules:{required:"Confirm password is required",validate:r=>r===w("password")||"Passwords do not match"}})]}),e.jsx("button",{type:"submit",className:"bg-foreground text-white px-6 py-2 text-sm uppercase hover:bg-foreground/90 transition-colors duration-200 shadow-md",children:"Update Password"})]})]}),e.jsx("div",{className:"w-fit mx-auto",children:e.jsx("button",{onClick:()=>c(!0),className:"bg-red-600 text-white px-6 py-2 text-sm uppercase hover:bg-red-700 transition-colors duration-200 shadow-md",children:"Log Out"})})]}),e.jsx(I,{children:S&&e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs(p.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},transition:{duration:.2},className:"bg-white  rounded w-11/12 max-w-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"Confirm Logout"}),e.jsx("p",{className:"text-sm text-foreground/80 mb-6",children:"Are you sure you want to log out? You will need to sign in again to access your account."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm bg-gray-200 text-gray-700  hover:bg-gray-300 transition-colors duration-150",children:"Cancel"}),e.jsx("button",{onClick:()=>{c(!1),F()},className:"px-4 py-2 text-sm bg-red-600 text-white hover:bg-red-700 transition-colors duration-150",children:"Yes, Log Out"})]})]})},"logout-modal")})]})}export{D as default};
