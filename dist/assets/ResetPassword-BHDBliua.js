import{g as y,a as P,j as s,H as u,I as n,B as x,b as h,V as a,i as p,h as w}from"./index-B8gvfyd-.js";function v(){const{token:l}=y(),{handleSubmit:d,register:r,formState:{errors:o},watch:c,reset:m}=P(),g=c("email"),f=async e=>{const i=a.loading("Please Wait..");try{(await p.post("https://srijanfabs.co.in/api/v1/auth/forgot-password-token",e)).data.success&&(a.success("Reset Link Sent on Your Email"),m())}catch(t){w(t)}finally{a.dismiss(i)}},j=async e=>{const i=a.loading("Please Wait..");try{(await p.put(`https://srijanfabs.co.in/api/v1/auth/forgot-password/${l}`,e)).data.success&&(a.success("Your Password Changed successfully"),m())}catch(t){w(t)}finally{a.dismiss(i)}};return l?s.jsx("div",{children:s.jsxs("div",{className:"boxedContainer px-8 md:w-[40%]  h-auto py-6",children:[s.jsx(u,{text:"Reset Your Password"}),s.jsxs("form",{className:"flex flex-col gap-2 mt-6",onSubmit:d(e=>j(e),e=>console.log(e)),children:[s.jsx(n,{register:r,name:"password",type:"password",label:"Password*",errors:o,rules:{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"},maxLength:{value:20,message:"Password must not exceed 20 characters"}}}),s.jsx(n,{register:r,name:"confirmPassword",type:"password",label:"Confirm Password*",errors:o,rules:{required:"Confirm password is required",validate:e=>e===c("password")||"Passwords must match"}}),s.jsx(x,{text:"Reset Password",type:"submit"})]}),s.jsxs("h1",{className:"text-sm text-center mt-3",children:["Back to"," ",s.jsx(h,{to:"/login",className:"underline text-xs text-gray-600 cursor-pointer",children:"Login"})]})]})}):s.jsx("div",{children:s.jsxs("div",{className:"boxedContainer px-8 md:w-[40%]  h-auto py-6",children:[s.jsx(u,{text:"Reset Password"}),s.jsxs("form",{className:"flex flex-col gap-2 mt-6",onSubmit:d(e=>f(e),e=>console.log(e)),children:[s.jsx("h1",{className:"text-sm text-gray-400 mb-3 text-center",children:"We will send you an email to reset your password"}),s.jsx(n,{value:g,register:r,name:"email",type:"email",label:"Email Or Username*",errors:o,rules:{required:"Email is required.",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Please enter a valid email address"}}}),s.jsx(x,{text:"Send Link",type:"submit"})]}),s.jsxs("h1",{className:"text-sm text-center mt-3",children:["Back to"," ",s.jsx(h,{to:"/login",className:"underline text-xs text-gray-600 cursor-pointer",children:"Login"})]})]})})}export{v as default};
