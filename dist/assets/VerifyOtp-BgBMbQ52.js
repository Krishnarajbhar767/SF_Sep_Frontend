import{u as g,r as i,j as a,m as o,B as P,c as x,V as R,h as E,g as S,N as T,H as V}from"./index-DRzNUvPi.js";const k=({userData:r})=>{const c=g(),[s,d]=i.useState(["","","","","",""]),[h,f]=i.useState(!1),[u,m]=i.useState(300),[p,y]=i.useState(!0),l=i.useRef([]);i.useEffect(()=>{var t;(t=l.current[0])==null||t.focus()},[]),i.useEffect(()=>{if(u<=0){y(!1);return}const t=setInterval(()=>{m(e=>e<=1?(clearInterval(t),0):e-1)},1e3);return()=>clearInterval(t)},[u]);const b=t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n<10?"0":""}${n}`},j=(t,e)=>{if(!/^\d*$/.test(e))return;const n=[...s];n[t]=e,d(n),e&&t<5&&l.current[t+1].focus()},w=(t,e)=>{e.key==="Backspace"&&!s[t]&&t>0&&l.current[t-1].focus()},N=t=>{const e=t.clipboardData.getData("text").trim();if(/^\d{6}$/.test(e)){const n=e.split("");d(n),l.current[5].focus()}},v=async()=>{const t=s.join("");if(t.length!==6)throw new Error("Please enter a 6-digit OTP");f(!0);try{console.log("User Registration data ->",{...r,otp:t});const e=await x.register({...r,otp:t});R.success("Your account has been successfully created! Please check your email for a confirmation link."),c("/login")}catch(e){E(e)}finally{f(!1)}},O=async()=>{y(!0),m(300);try{const t=await x.sendOtp(r)}catch{}};return a.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center justify-center w-full max-w-md mx-auto px-4",children:[a.jsx(o.h2,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"text-lg font-semibold uppercase text-foreground mb-4",children:"Enter OTP"}),a.jsx("div",{className:"flex justify-center gap-2 mb-6",children:s.map((t,e)=>a.jsx(o.input,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:e*.1},type:"text",maxLength:"1",value:t,onChange:n=>j(e,n.target.value),onKeyDown:n=>w(e,n),onPaste:e===0?N:void 0,ref:n=>l.current[e]=n,className:"w-9 md:w-15 lg:w-[3.9rem] h-12 text-center text-xl border-[2px] border-foreground/50 focus:outline-none focus:border-foreground text-foreground transition-all duration-100 ease-linear"},e))}),a.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"w-full",children:a.jsx(P,{onSubmitHandler:v,text:"Verify",disabled:h})}),a.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.7},className:"flex flex-col items-center mt-4 w-full",children:p?a.jsxs(o.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},className:"text-sm text-foreground mb-2",children:["Resend OTP in ",b(u)]}):a.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},className:"w-full",children:a.jsx("button",{disabled:p,onClick:O,className:"w-full bg-transparent border-[2px] border-foreground/50 text-foreground hover:bg-gray-100 disabled:opacity-50 h-12 px-6 ",children:"Resend OTP"})})})]})};function $(){g();const r=S(),c=r==null?void 0:r.state,s=c==null?void 0:c.email;return s?a.jsxs("div",{className:"boxedContainer px-8 md:w-[60%] lg:w-[40%] py-8 h-auto ",children:[a.jsx(V,{text:"Verify OTP"}),a.jsxs("p",{className:"text-sm text-foreground my-6 text-center ",children:["An OTP has been sent to"," ",a.jsx("span",{className:"lowercase   font-medium",children:s}),". Please enter it below to verify your account."]}),a.jsx(k,{userData:c,email:s})]}):a.jsx(T,{to:"/",replace:!0})}export{$ as default};
