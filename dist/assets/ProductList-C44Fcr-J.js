import{d as E,r as a,e as T,j as e,m as p,aQ as L,b as f,az as M,aA as I,aB as V,a6 as _,aj as B,V as w,aE as N,h as H}from"./index-B8gvfyd-.js";import{p as O}from"./product.api-CLZXQtVQ.js";const R=()=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-sm p-4 animate-pulse space-y-2",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-md mx-auto"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mx-auto"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsx("div",{className:"h-6 w-14 bg-gray-300 rounded"}),e.jsx("div",{className:"h-6 w-14 bg-gray-300 rounded"})]})]}),$=()=>{const m=E(s=>s.product.products)||[],[y,x]=a.useState(null),[c,v]=a.useState(""),[g,S]=a.useState(""),[u,P]=a.useState(""),C=T(),[r,k]=a.useState(null),[h,j]=a.useState("asc"),[A,F]=a.useState(!0);a.useEffect(()=>{const s=setTimeout(()=>F(!1),1e3);return()=>clearTimeout(s)},[m]);const z=s=>{r===s?j(t=>t==="asc"?"desc":"asc"):(k(s),j("asc"))},b=a.useMemo(()=>{let s=[...m];if(c.trim()){const i=c.trim().toLowerCase();s=s.filter(n=>n.name.toLowerCase().includes(i))}const t=parseFloat(g)||0,l=parseFloat(u)||1/0;return s=s.filter(i=>i.price>=t&&i.price<=l),r&&s.sort((i,n)=>{let o=i[r],d=n[r];return r==="category"&&(o=i.category.name,d=n.category.name),o==null||d==null?0:h==="asc"?o>d?1:-1:o<d?1:-1}),s},[m,c,g,u,r,h]),D=async s=>{const t=w.loading("Please wait");try{const l=await O.deleteProduct(s);N(),console.log("Product Response After Delete ->",l),C(N(l)),x(null)}catch(l){H(l)}finally{w.dismiss(t)}};return e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-semibold uppercase text-gray-800 tracking-wide",children:[e.jsx(L,{size:20})," Products"]}),e.jsx(f,{to:"/admin/products/add",className:"bg-gray-800 text-white px-4 py-2 text-sm uppercase hover:bg-gray-700 transition-colors duration-200 shadow-md w-full sm:w-auto",children:"Add Product"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-md px-2",children:[e.jsx(M,{className:"text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:c,onChange:s=>v(s.target.value),className:"ml-1 py-1 text-sm outline-none"})]}),e.jsx("input",{type:"number",placeholder:"Min price",value:g,onChange:s=>S(s.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-sm"}),e.jsx("input",{type:"number",placeholder:"Max price",value:u,onChange:s=>P(s.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["price","stock","rating"].map(s=>e.jsxs("button",{onClick:()=>z(s),className:"flex items-center gap-1 px-3 py-1 text-sm bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:["Sort by ",s.charAt(0).toUpperCase()+s.slice(1),r===s&&(h==="asc"?e.jsx(I,{size:16}):e.jsx(V,{size:16}))]},s))}),A?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((s,t)=>e.jsx(R,{},t))}):b.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600 text-sm",children:"No products match your criteria."})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(s=>{var t;return e.jsxs(p.div,{whileHover:{scale:1.02},className:"bg-white border border-gray-200 rounded-md shadow-sm p-4 flex flex-col gap-2 capitalize",children:[e.jsx("img",{src:s.images[0],alt:s.name,className:"w-20 h-20 object-cover mx-auto rounded-md"}),e.jsx("h3",{className:"text-base font-medium text-gray-800 text-center",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Category: ",(t=s==null?void 0:s.category)==null?void 0:t.name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Price: â‚¹",s==null?void 0:s.price]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Stock: ",s==null?void 0:s.stock]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs(f,{to:`/admin/products/edit/${s._id}`,className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 text-sm",children:[e.jsx(_,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>x(s._id),className:"flex items-center gap-1 text-red-600 hover:text-red-700 text-sm",children:[e.jsx(B,{size:14})," Delete"]})]})]},s._id)})}),y&&e.jsx("div",{className:"fixed inset-0 glass bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs(p.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this product? This action cannot be undone."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>D(y),className:"bg-red-600 text-white px-4 py-2 text-sm uppercase hover:bg-red-700 transition-colors duration-200 shadow-md w-full sm:w-auto",children:"Delete"}),e.jsx("button",{onClick:()=>x(null),className:"bg-gray-200 text-gray-800 px-4 py-2 text-sm uppercase hover:bg-gray-300 transition-colors duration-200 shadow-md w-full sm:w-auto",children:"Cancel"})]})]})})]})};export{$ as default};
