import{l as E,r as o,a as A,au as a,j as e,m as p,aw as S,ax as q,a6 as C,aj as F,X as I,I as l}from"./index-B8gvfyd-.js";const D={getAllUser:"/admin/user/all-user"},h={getAllUsers:async()=>{var d;const i=await E.get(D.getAllUser);return(d=i==null?void 0:i.data)==null?void 0:d.data}},z=()=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-sm p-4 animate-pulse space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsx("div",{className:"h-6 w-14 bg-gray-300 rounded"}),e.jsx("div",{className:"h-6 w-14 bg-gray-300 rounded"})]})]});function P(){const[i,d]=o.useState([]),[f,j]=o.useState(!0),[w,c]=o.useState(!1),[x,g]=o.useState(null),[b,y]=o.useState(null),{register:t,handleSubmit:N,formState:{errors:r},reset:u}=A();o.useEffect(()=>{(async()=>{try{const s=await h.getAllUsers();d(s)}catch{a.error("Failed to load users")}finally{j(!1)}})()},[]);const v=N(async s=>{const m=a.loading("Please wait...");try{let n;x?n=await h.update(x._id,s):n=await h.create(s),d(n),a.success(x?"User updated":"User added"),c(!1),g(null),u()}catch{a.error("Operation failed")}finally{a.dismiss(m)}}),U=s=>{g(s),u({firstName:s.firstName,lastName:s.lastName,dob:s.dob,email:s.email,phone:s.phone,role:s.role,avatar:s.avatar}),c(!0)},k=async s=>{const m=a.loading("Deleting...");try{const n=await h.delete(s);d(n),a.success("User deleted"),y(null)}catch{a.error("Delete failed")}finally{a.dismiss(m)}};return e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-semibold uppercase text-gray-800 tracking-wide",children:[e.jsx(S,{size:20})," Users"]}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-gray-800 text-white px-4 py-2 text-sm uppercase hover:bg-gray-700 transition-colors duration-200 shadow-md w-full sm:w-auto flex items-center gap-2",children:[e.jsx(q,{size:16})," Add User"]})]}),f?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((s,m)=>e.jsx(z,{},m))}):i.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600 text-sm",children:"No users available."})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(s=>e.jsxs(p.div,{whileHover:{scale:1.02},className:"bg-white border border-gray-200 rounded-md shadow-sm p-4 flex flex-col gap-2",children:[e.jsx("h3",{className:"text-base font-medium text-gray-800",children:`${s.firstName} ${s.lastName}`}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Email: ",s.email]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",s.phone]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Role: ",s.role]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Joined:"," ",new Date(s.createdAt).toISOString().split("T")[0]]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("button",{onClick:()=>U(s),className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 text-sm",children:[e.jsx(C,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>y(s._id),className:"flex items-center gap-1 text-red-600 hover:text-red-700 text-sm",children:[e.jsx(F,{size:14})," Delete"]})]})]},s._id))}),e.jsx("div",{className:`glass h-screen fixed inset-0 bg-opacity-30 flex items-center justify-center z-50 p-4 sm:p-6 overflow-y-hidden ${w?"":"hidden"}`,children:e.jsxs(p.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"bg-white bg-opacity-50 backdrop-blur-md p-4 sm:p-6 w-full max-w-md sm:max-w-lg my-4 sm:my-0 shadow-lg border border-gray-300 border-opacity-20 rounded-lg relative overflow-y-scroll h-[90%]",children:[e.jsx("button",{onClick:()=>{c(!1),g(null),u()},className:"absolute top-4 right-4 text-gray-600 hover:text-gray-800",children:e.jsx(I,{size:20})}),e.jsx("h3",{className:"text-lg font-semibold uppercase text-gray-800 mb-4 tracking-wide",children:x?"Edit User":"Add User"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx(l,{label:"First Name",name:"firstName",register:t,errors:r,rules:{required:"First name is required"}}),e.jsx(l,{label:"Last Name",name:"lastName",register:t,errors:r,rules:{required:"Last name is required"}}),e.jsx(l,{label:"Date of Birth",name:"dob",type:"date",register:t,errors:r}),e.jsx(l,{label:"Email",name:"email",type:"email",register:t,errors:r,rules:{required:"Email is required"}}),e.jsx(l,{label:"Phone",name:"phone",register:t,errors:r,rules:{required:"Phone is required",pattern:{value:/^[1-9][0-9]{9}$/,message:"Enter a valid 10-digit phone"}}}),e.jsx(l,{label:"Role",name:"role",register:t,errors:r,rules:{required:"Role is required"}}),e.jsx(l,{label:"Avatar URL",name:"avatar",register:t,errors:r}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{type:"submit",className:"bg-gray-800 text-white px-4 py-2 text-sm uppercase hover:bg-gray-700 transition-colors duration-200 shadow-md w-full sm:w-auto",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>{c(!1),g(null),u()},className:"bg-gray-200 text-gray-800 px-4 py-2 text-sm uppercase hover:bg-gray-300 transition-colors duration-200 shadow-md w-full sm:w-auto",children:"Cancel"})]})]})]})}),e.jsx("div",{className:`glass fixed inset-0 bg-opacity-30 flex items-center justify-center z-50 p-4 ${b?"":"hidden"}`,children:e.jsxs(p.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"bg-white bg-opacity-50 backdrop-blur-md p-4 sm:p-6 w-full max-w-sm shadow-lg border border-gray-300 border-opacity-20 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold uppercase text-gray-800 mb-4 tracking-wide",children:"Confirm Deletion"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this user? This action cannot be undone."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>k(b),className:"bg-red-600 text-white px-4 py-2 text-sm uppercase hover:bg-red-700 transition-colors duration-200 shadow-md w-full sm:w-auto",children:"Delete"}),e.jsx("button",{onClick:()=>y(null),className:"bg-gray-200 text-gray-800 px-4 py-2 text-sm uppercase hover:bg-gray-300 transition-colors duration-200 shadow-md w-full sm:w-auto",children:"Cancel"})]})]})})]})}export{P as default};
